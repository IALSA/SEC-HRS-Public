# Importing raw RAND files version A.
pathDir <- getwd()
pathFolder <- file.path(pathDir,"Data/Extract/RAND_vA")
pathFolderSPSS <- file.path(pathFolder,"spss")
pathFile1 <- file.path(pathFolderSPSS, "h04f1a.sav")
pathFile1RDS <- file.path(pathFolder, "h04f1a.Rds")
pathFile2 <- file.path(pathFolderSPSS, "h06f2b.sav")
pathFile2RDS <- file.path(pathFolder, "h06f2b.Rds")
pathFile3 <- file.path(pathFolderSPSS, "h08f2a.sav")
pathFile3RDS <- file.path(pathFolder, "h08f2a.Rds")
pathFile4 <- file.path(pathFolderSPSS, "h10f4a.sav")
pathFile4RDS <- file.path(pathFolder, "h10f4a.Rds")
require(foreign)
# Next three lines are run the first time on machine
# ds0_1 <- read.spss(file = pathFile1, use.value.labels=TRUE)
# ds0_1 <- data.frame(ds0_1)
# saveRDS(object = ds0_1, file=pathFile1RDS, compress="xz")
ds01 <- readRDS(pathFile1RDS)
#Next three lines are run the first time on machine
#ds0_2 <- read.spss(file=pathFile2, use.value.labels=TRUE)
#ds0_2 <- data.frame(ds0_2)
#saveRDS(object = ds0_2, file=pathFile2RDS, compress="xz")
ds02 <- readRDS(pathFile2RDS)
#Next three lines are run the first time on machine
#ds0_3 <- read.spss(file=pathFile3, use.value.labels=TRUE)
#ds0_3 <- data.frame(ds0_3)
#saveRDS(object = ds0_3, file=pathFile3RDS, compress="xz")
ds03 <- readRDS(pathFile3RDS)
#Next three lines are run the first time on machine
#ds0_4 <- read.spss(file=pathFile4, use.value.labels=TRUE)
#ds0_4 <- data.frame(ds0_4)
#saveRDS(object = ds0_4, file=pathFile4RDS, compress="xz")
ds04 <- readRDS(pathFile4RDS)
# Importing raw RAND files version A.
pathDir <- getwd()
pathFolder <- file.path(pathDir,"Data/Extract/RAND_vA")
pathFolderSPSS <- file.path(pathFolder,"spss")
pathFile1 <- file.path(pathFolderSPSS, "h04f1a.sav")
pathFile1RDS <- file.path(pathFolder, "h04f1a.Rds")
pathFile2 <- file.path(pathFolderSPSS, "h06f2b.sav")
pathFile2RDS <- file.path(pathFolder, "h06f2b.Rds")
pathFile3 <- file.path(pathFolderSPSS, "h08f2a.sav")
pathFile3RDS <- file.path(pathFolder, "h08f2a.Rds")
pathFile4 <- file.path(pathFolderSPSS, "h10f4a.sav")
pathFile4RDS <- file.path(pathFolder, "h10f4a.Rds")
require(foreign)
# Next three lines are run the first time on machine
# ds0_1 <- read.spss(file = pathFile1, use.value.labels=TRUE)
# ds0_1 <- data.frame(ds0_1)
# saveRDS(object = ds0_1, file=pathFile1RDS, compress="xz")
ds01 <- readRDS(pathFile1RDS)
#Next three lines are run the first time on machine
#ds0_2 <- read.spss(file=pathFile2, use.value.labels=TRUE)
#ds0_2 <- data.frame(ds0_2)
#saveRDS(object = ds0_2, file=pathFile2RDS, compress="xz")
ds02 <- readRDS(pathFile2RDS)
#Next three lines are run the first time on machine
#ds0_3 <- read.spss(file=pathFile3, use.value.labels=TRUE)
#ds0_3 <- data.frame(ds0_3)
#saveRDS(object = ds0_3, file=pathFile3RDS, compress="xz")
ds03 <- readRDS(pathFile3RDS)
#Next three lines are run the first time on machine
#ds0_4 <- read.spss(file=pathFile4, use.value.labels=TRUE)
#ds0_4 <- data.frame(ds0_4)
#saveRDS(object = ds0_4, file=pathFile4RDS, compress="xz")
ds04 <- readRDS(pathFile4RDS)
# Importing raw RAND files version A.
pathDir <- getwd()
pathFolder <- file.path(pathDir,"Data/Extract/RAND_vA")
pathFolderSPSS <- file.path(pathFolder,"spss")
pathFile1 <- file.path(pathFolderSPSS, "h04f1a.sav")
pathFile1RDS <- file.path(pathFolder, "h04f1a.Rds")
pathFile2 <- file.path(pathFolderSPSS, "h06f2b.sav")
pathFile2RDS <- file.path(pathFolder, "h06f2b.Rds")
pathFile3 <- file.path(pathFolderSPSS, "h08f2a.sav")
pathFile3RDS <- file.path(pathFolder, "h08f2a.Rds")
pathFile4 <- file.path(pathFolderSPSS, "h10f4a.sav")
pathFile4RDS <- file.path(pathFolder, "h10f4a.Rds")
require(foreign)
ds04 <- readRDS(pathFile4RDS)
<<<<<<< HEAD
# THis is how to rename with dplyr package
# Try to find names that are easy to type, but also that can be used in
graphs for labels
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR)
head(ds, 12)
ds06 <- ds06full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR)
head(ds, 12)
=======
>>>>>>> origin/Cassandra
# Importing raw RAND files version A.
pathDir <- getwd()
pathFolder <- file.path(pathDir,"Data/Extract/RAND_vA")
pathFolderSPSS <- file.path(pathFolder,"spss")
pathFile1 <- file.path(pathFolderSPSS, "h04f1a.sav")
pathFile1RDS <- file.path(pathFolder, "h04f1a.Rds")
pathFile2 <- file.path(pathFolderSPSS, "h06f2b.sav")
pathFile2RDS <- file.path(pathFolder, "h06f2b.Rds")
pathFile3 <- file.path(pathFolderSPSS, "h08f2a.sav")
pathFile3RDS <- file.path(pathFolder, "h08f2a.Rds")
pathFile4 <- file.path(pathFolderSPSS, "h10f4a.sav")
pathFile4RDS <- file.path(pathFolder, "h10f4a.Rds")
require(foreign)
# Next three lines are run the first time on machine
# ds0_1 <- read.spss(file = pathFile1, use.value.labels=TRUE)
# ds0_1 <- data.frame(ds0_1)
# saveRDS(object = ds0_1, file=pathFile1RDS, compress="xz")
<<<<<<< HEAD
ds04full <- readRDS(pathFile1RDS)
=======
ds01 <- readRDS(pathFile1RDS)
>>>>>>> origin/Cassandra
#Next three lines are run the first time on machine
#ds0_2 <- read.spss(file=pathFile2, use.value.labels=TRUE)
#ds0_2 <- data.frame(ds0_2)
#saveRDS(object = ds0_2, file=pathFile2RDS, compress="xz")
<<<<<<< HEAD
ds06full <- readRDS(pathFile2RDS)
require(dplyr)
install.packages("dplyr")
require(dplyr)
# THis is how to select with dplyr package
# ds <- ds01 %>%
#   dplyr::select(HHIDPN, DEGREE, GENDER, RACE, BIRTHMO, BIRTHYR)
# head(ds, 12)
# This is how to select with base package
# THis is how to rename with dplyr package
# Try to find names that are easy to type, but also that can be used in
graphs for labels
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR)
head(ds, 12)
ds06 <- ds06full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR)
head(ds, 12)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR)
head(ds, 12)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR)
head(ds04, 12)
ds06 <- ds06full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR)
head(ds06, 12)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, attend=JB082)
head(ds04, 12)
ds06 <- ds06full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, attend=KB082)
head(ds06, 12)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, attend=JB082, gender=JX060_R)
head(ds04, 12)
ds06 <- ds06full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, attend=KB082, gender=KX060_R)
head(ds06, 12)
all.equal(ds04$gender,ds06$gender)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, attend=JB082)
head(ds04, 12)
ds06 <- ds06full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, attend=KB082)
head(ds06, 12)
# graphs for labels
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, attend=JB082)
head(ds04, 12)
ds06 <- ds06full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=KX060_R, attend=KB082)
head(ds06, 12)
?merge
ds <- merge(x=ds04, y=ds06, by=HHIDPN)
View(ds04)
View(ds06)
ds <- merge(x=ds04, y=ds06, by="HHIDPN")
View(ds)
ds <- merge(x=ds04, y=ds06, by= c("HHIDPN","BIRTHMO","BIRTHYR", "gender"))
View(ds)
install.packages("plyr")
ds <- plyr::rename(dsTemp, replace=c("attend.x"="attend2004", "attend.y"="attend2006"))
dsTemp <- merge(x=ds04, y=ds06, by= c("HHIDPN","BIRTHMO","BIRTHYR", "gender"))
ds <- plyr::rename(dsTemp, replace=c("attend.x"="attend2004", "attend.y"="attend2006"))
View(dsTemp)
View(ds)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
cohort=JZ023, couplesplit=JSUBHH, Spousenum=JPN_SP, attend=JB082)
head(ds04, 12)
ds06 <- ds06full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=KX060_R, yrsed=KBO14
cohort=KZ023, couplesplit=KSUBHH, Spousenum=KJN_SP, attend=KB082)
head(ds06, 12)
View(ds06full)
View(ds06)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
cohort=JZ023, couplesplit=JSUBHH, Spousenum=JPN_SP, attend=JB082)
head(ds04, 12)
require(dplyr)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
cohort=JZ023, couplesplit=JSUBHH, Spousenum=JPN_SP, attend=JB082)
head(ds04, 12)
View(ds06)
View(ds04)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
cohort=JZ023, nummarriages=JB065, couplesplit=JSUBHH, Spousenum=JPN_SP, attend=JB082)
head(ds04, 12)
View(ds04)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
cohort=JZ023, married=JA026, nummarriages=JB065, couplesplit=JSUBHH,
Spousenum=JPN_SP, attend=JB082)
head(ds04, 12)
View(ds04)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
cohort=JZ023, englishH=JB054, married=JA026, newmarriage=JB055, nummarriages=JB065, couplesplit=JSUBHH,
Spousenum=JPN_SP, childliv=JB034, attend=JB082)
head(ds04, 12)
require(dplyr)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
cohort=JZ023, englishH=JB054, married=JA026, newmarriage=JB055, nummarriages=JB065, couplesplit=JSUBHH,
Spousenum=JPN_SP, childliv=JB034, attend=JB082)
head(ds04, 12)
View(ds04)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
Hispanic=JB028A, Race=JB031A, cohort=JZ023, englishH=JB054, married=JA026, newmarriage=JB055,
nummarriages=JB065, couplesplit=JSUBHH,
Spousenum=JPN_SP, childliv=JB034, attend=JB082)
ds04 <- ds04full %>%
dplyr::select(  HHIDPN, BIRTHMO, BIRTHYR, gender=JX060_R, yrsed=JB014,
Hispanic=JB028A, Race=JB031A, cohort=JZ023, englishH=JB054, married=JA026, newmarriage=JB055,
nummarriages=JB065, couplesplit=JSUBHH,
Spousenum=JPN_SP, childliv=JB034, attend=JB082)
head(ds04, 12)
View(ds04)
=======
ds02 <- readRDS(pathFile2RDS)
#Next three lines are run the first time on machine
#ds0_3 <- read.spss(file=pathFile3, use.value.labels=TRUE)
#ds0_3 <- data.frame(ds0_3)
#saveRDS(object = ds0_3, file=pathFile3RDS, compress="xz")
ds03 <- readRDS(pathFile3RDS)
#Next three lines are run the first time on machine
#ds0_4 <- read.spss(file=pathFile4, use.value.labels=TRUE)
#ds0_4 <- data.frame(ds0_4)
#saveRDS(object = ds0_4, file=pathFile4RDS, compress="xz")
ds04 <- readRDS(pathFile4RDS)
con <- gzfile(pathFile1RDS, "rb")
wm <- readBin(con, "raw", n = 100) # size is a guess
close(con)
ds <- data.frame(wm)
View(ds)
ds01 <- readRDS(pathFile1RDS, n=100)
?merge
>>>>>>> origin/Cassandra
# Importing raw RAND files version A.
pathDir <- getwd()
pathFolder <- file.path(pathDir,"Data/Extract/RAND_vA")
pathFolderSPSS <- file.path(pathFolder,"spss")
pathFile1 <- file.path(pathFolderSPSS, "h04f1a.sav")
pathFile1RDS <- file.path(pathFolder, "h04f1a.Rds")
pathFile2 <- file.path(pathFolderSPSS, "h06f2b.sav")
pathFile2RDS <- file.path(pathFolder, "h06f2b.Rds")
pathFile3 <- file.path(pathFolderSPSS, "h08f2a.sav")
pathFile3RDS <- file.path(pathFolder, "h08f2a.Rds")
pathFile4 <- file.path(pathFolderSPSS, "h10f4a.sav")
pathFile4RDS <- file.path(pathFolder, "h10f4a.Rds")
require(foreign)
# Next three lines are run the first time on machine
# ds0_1 <- read.spss(file = pathFile1, use.value.labels=TRUE)
# ds0_1 <- data.frame(ds0_1)
# saveRDS(object = ds0_1, file=pathFile1RDS, compress="xz")
<<<<<<< HEAD
ds04full <- readRDS(pathFile1RDS)
names1 <- names(ds04full[1:3,])
length(names1)
right.csv(x=names1,file= file.path(pathFolder,"names1.csv"))
write.csv(x=names1,file= file.path(pathFolder,"names1.csv"))
pathFolder
=======
ds01 <- readRDS(pathFile1RDS)
a <- names(ds01)[1:10]
a
require(dplyr)
ds <- ds01 %>%
dplyr::select(HHIDPN, DEGREE, GENDER, RACE, BIRTHMO, BIRTHYR)
head(ds, 12)
ds <- ds01 %>%
dplyr::select(HHIDPN, PN, DEGREE, GENDER, RACE, BIRTHMO, BIRTHYR)
head(ds, 12)
ds <- ds01[ds01$PN %in% c(0:300),1:10]
c(0:300)
str(ds01$PN)
str(ds01[,1:20])
summary(ds01$HHIDPN)
summary(ds01$PN)
unique(length(ds01$HHIDPN))
# THis is how to select with dplyr package
ds <- ds01 %>%
dplyr::select(HHIDPN, PN, DEGREE, GENDER, RACE, BIRTHMO, BIRTHYR, JB082)
head(ds, 12)
table(ds01$JB082)
summary(ds01$HHIDPN)
ds <- ds01[ds01$HHIDPN %in% c(100000000:200000000),varPick]
varPick <- c("HHIDPN", "DEGREE", "GENDER", "RACE", "BIRTHMO", "BIRTHYR", "JB082", "JZ023"))
varPick
varPick <- c("HHIDPN", "DEGREE", "GENDER", "RACE", "BIRTHMO", "BIRTHYR", "JB082", "JZ023")
varPick
ds <- ds01[ds01$HHIDPN %in% c(100000000:200000000),varPick]
ds1 <- ds01[ds01$HHIDPN %in% c(100000000:200000000),varPick]
ds1 <- ds01[ds01$HHIDPN %in% c(100000000:200000000),varPick]
ds1 <- ds01[1:100,varPick]
View(ds1)
ds02 <- readRDS(pathFile2RDS)
ds03 <- readRDS(pathFile3RDS)
ds04 <- readRDS(pathFile4RDS)
ds2 <- ds02[1:100,varPick]
ds3 <- ds03[1:100,varPick]
ds4 <- ds04[1:100,varPick]
varPick <- c("HHIDPN")#, "DEGREE", "GENDER", "RACE", "BIRTHMO", "BIRTHYR", "JB082", "JZ023")
ds1 <- ds01[1:100,varPick]
ds2 <- ds02[1:100,varPick]
varPick <- c("HHIDPN", "DEGREE")#, "GENDER", "RACE", "BIRTHMO", "BIRTHYR", "JB082", "JZ023")
ds1 <- ds01[1:100,varPick]
ds2 <- ds02[1:100,varPick]
varPick <- c("HHIDPN", "DEGREE", "GENDER", "RACE", "BIRTHMO", "BIRTHYR")#, "JB082", "JZ023")
ds1 <- ds01[1:100,varPick]
ds2 <- ds02[1:100,varPick]
ds3 <- ds03[1:100,varPick]
ds4 <- ds04[1:100,varPick]
varPick <- c("HHIDPN", "DEGREE", "GENDER", "RACE", "BIRTHMO")#, "BIRTHYR")#, "JB082", "JZ023")
ds1 <- ds01[1:100,varPick]
ds2 <- ds02[1:100,varPick]
ds3 <- ds03[1:100,varPick]
ds4 <- ds04[1:100,varPick]
names(ds04[,1:100])
names(ds01[,1:100])
names(ds02[,1:100])
names(ds03[,1:100])
names(ds04[,1:100])
>>>>>>> origin/Cassandra
